From 093b6ebb4b8c52d27736cda5ec00be12f66b5cd4 Mon Sep 17 00:00:00 2001
From: yingzhex <yingzhenx.li@intel.com>
Date: Wed, 19 Feb 2020 18:17:52 +0800
Subject: [PATCH] Intercept back and home TouchEvent since apps disable it

Change-Id: I3508beb14793e59359a1a5b6fff9d2a46cd8982e
Tracked-On: OAM-89707
Signed-off-by: yingzhex <yingzhenx.li@intel.com>
---
 .../android/systemui/statusbar/phone/NavigationBarView.java | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarView.java b/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarView.java
index 2a1f92f5edd..480482eefe9 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarView.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarView.java
@@ -337,8 +337,14 @@ public class NavigationBarView extends FrameLayout implements PluginListener<Nav
                 int y = (int) event.getY();
                 mDownHitTarget = HIT_TARGET_NONE;
                 if (getBackButton().isVisible() && mBackButtonBounds.contains(x, y)) {
+                    if (SystemProperties.getBoolean("sys.disable.nav.back", false)) {
+                        return true;
+                    }
                     mDownHitTarget = HIT_TARGET_BACK;
                 } else if (getHomeButton().isVisible() && mHomeButtonBounds.contains(x, y)) {
+                    if (SystemProperties.getBoolean("sys.disable.nav.home", false)) {
+                        return true;
+                    }
                     mDownHitTarget = HIT_TARGET_HOME;
                 } else if (getRecentsButton().isVisible() && mRecentsButtonBounds.contains(x, y)) {
                     mDownHitTarget = HIT_TARGET_OVERVIEW;
-- 
2.17.1

